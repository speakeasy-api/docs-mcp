[
  {
    "name": "Create a Dub short link",
    "prompt": "Using the Dub TypeScript SDK (`dub`), write a script in solution.ts that creates a short link pointing to https://example.com. Use the Dub SDK's `links.create` method. Install all dependencies first with npm. The script should import the Dub client, instantiate it, and call the create link method.",
    "docsDir": "../realistic",
    "category": "sdk-usage",
    "maxTurns": 15,
    "maxBudgetUsd": 0.50,
    "setup": "npm init -y --silent 2>/dev/null",
    "assertions": [
      { "type": "contains", "value": "dub" },
      { "type": "not_contains", "value": "I don't know" },
      { "type": "script", "command": "test -f solution.ts", "name": "file-exists" },
      { "type": "script", "command": "grep -q 'dub' package.json", "name": "dub-in-deps" },
      { "type": "script", "command": "npx tsc --noEmit --esModuleInterop --moduleResolution node --module commonjs --target es2020 solution.ts 2>&1 || true", "name": "typecheck-attempt" }
    ]
  },
  {
    "name": "List Dub analytics events",
    "prompt": "Using the Dub TypeScript SDK (`dub`), write a script in solution.ts that retrieves analytics for clicks. Use the SDK's analytics methods. Install all dependencies first with npm.",
    "docsDir": "../realistic",
    "category": "sdk-usage",
    "maxTurns": 15,
    "maxBudgetUsd": 0.50,
    "setup": "npm init -y --silent 2>/dev/null",
    "assertions": [
      { "type": "contains", "value": "dub" },
      { "type": "not_contains", "value": "I don't know" },
      { "type": "script", "command": "test -f solution.ts", "name": "file-exists" },
      { "type": "script", "command": "grep -q 'analytics' solution.ts", "name": "uses-analytics" }
    ]
  },
  {
    "name": "Upsert a Dub link",
    "prompt": "Using the Dub TypeScript SDK (`dub`), write a script in solution.ts that upserts a link (creates it if it doesn't exist, updates it otherwise). Use the SDK's `links.upsert` method. Install all dependencies first with npm.",
    "docsDir": "../realistic",
    "category": "sdk-usage",
    "maxTurns": 15,
    "maxBudgetUsd": 0.50,
    "setup": "npm init -y --silent 2>/dev/null",
    "assertions": [
      { "type": "contains", "value": "dub" },
      { "type": "script", "command": "test -f solution.ts", "name": "file-exists" },
      { "type": "script", "command": "grep -q 'upsert' solution.ts", "name": "uses-upsert" }
    ]
  },
  {
    "name": "Retrieve a Dub link by ID",
    "prompt": "Using the Dub TypeScript SDK (`dub`), write a script in solution.ts that retrieves an existing link's details by its link ID. Use the SDK's `links.get` method. Install all dependencies first with npm.",
    "docsDir": "../realistic",
    "category": "sdk-usage",
    "maxTurns": 15,
    "maxBudgetUsd": 0.50,
    "setup": "npm init -y --silent 2>/dev/null",
    "assertions": [
      { "type": "contains", "value": "dub" },
      { "type": "script", "command": "test -f solution.ts", "name": "file-exists" },
      { "type": "script", "command": "grep -q 'links' solution.ts", "name": "uses-links-api" }
    ]
  }
]
